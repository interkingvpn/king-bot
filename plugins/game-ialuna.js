const _0x40e051=_0x3b05;(function(_0x13c53c,_0x5774f1){const _0x4e64b6=_0x3b05,_0x15b433=_0x13c53c();while(!![]){try{const _0x497a21=parseInt(_0x4e64b6(0x1a1))/0x1*(-parseInt(_0x4e64b6(0x1c3))/0x2)+-parseInt(_0x4e64b6(0x1c9))/0x3+parseInt(_0x4e64b6(0x18e))/0x4+-parseInt(_0x4e64b6(0x1b9))/0x5+parseInt(_0x4e64b6(0x19f))/0x6+parseInt(_0x4e64b6(0x177))/0x7+parseInt(_0x4e64b6(0x1be))/0x8;if(_0x497a21===_0x5774f1)break;else _0x15b433['push'](_0x15b433['shift']());}catch(_0x27488d){_0x15b433['push'](_0x15b433['shift']());}}}(_0x5550,0xdc19b));import _0x155a77 from'axios';import _0x15a45b from'fs';import _0x4bb283 from'./downloader-play.js';import _0x1fa1f2 from'../plugins/lunaia/support-plugin.js';import _0x1d9b68 from'./menu_completo_actualizado.js';import{isVoiceMessage,handleVoiceMessage}from'./voice-handler.js';import _0x4e354e from'../plugins/lunaia/weather-plugin.js';import _0x38496a from'../plugins/lunaia/football-plugin.js';import _0x3871be from'../plugins/lunaia/social-plugin.js';import _0x39a633 from'../plugins/lunaia/image-plugin.js';import _0x28ea0f from'../plugins/lunaia/music-plugin.js';import _0x5fe482 from'../plugins/lunaia/menu-plugin.js';function _0x3b05(_0x4c295f,_0x968c27){const _0x55508b=_0x5550();return _0x3b05=function(_0x3b05e0,_0x416b84){_0x3b05e0=_0x3b05e0-0x177;let _0x5bf016=_0x55508b[_0x3b05e0];return _0x5bf016;},_0x3b05(_0x4c295f,_0x968c27);}import _0x3edb0c from'../plugins/lunaia/tagall-plugin.js';function _0x5550(){const _0x227f7d=['@s.whatsapp.net','data','startsWith','quÃ©\x20tal','API\x20Gemini\x20no\x20disponible\x20-\x20Usando\x20sistema\x20conversacional:','@77060907253864','Error\x20crÃ­tico:','2315655WnmsbB','quien\x20te\x20creo','user','handle','que\x20tal','13668792aiSAkO','jid','quiÃ©n\x20te\x20creÃ³','ðŸŒ™\x20*KINGâ€¢BOT*','entries','33718jtwoSo','canHandle','application/json','ðŸŒ™\x20Â¡Estoy\x20muy\x20bien,\x20gracias\x20por\x20preguntar!\x20Lista\x20para\x20ayudarte\x20en\x20lo\x20que\x20necesites.\x20Â¿QuÃ©\x20te\x20gustarÃ­a\x20hacer?\x20ðŸ˜Š','length','\x0a\x0aUsuario:\x20','4555956bXKekx','composing','8637643KPghQR','content','quien\x20te\x20hizo','candidates','Error\x20inicializaciÃ³n:','ðŸŒ™\x20Soy\x20kingâ€¢bot,\x20un\x20asistente\x20inteligente\x20creado\x20por\x20INTER\x20KING.\x20Puedo\x20ayudarte\x20con\x20muchas\x20cosas\x20como\x20generar\x20imÃ¡genes,\x20descargar\x20mÃºsica,\x20mostrar\x20el\x20clima,\x20informaciÃ³n\x20de\x20fÃºtbol\x20y\x20mucho\x20mÃ¡s.\x20Â¿En\x20quÃ©\x20te\x20puedo\x20ayudar?\x20âœ¨','substring','caption','\x0a\x0a[Respuesta\x20truncada]','Hola','how\x20are\x20you','thank\x20you','trim','toLowerCase','hola','@lid','conversation','replace','como\x20estas','set','iaLunaActive','message','key','2329360WcVyCI','hello','ðŸ‘‘\x20Hola,\x20soy\x20KINGâ€¢BOT.\x20Mi\x20sistema\x20de\x20IA\x20estÃ¡\x20temporalmente\x20fuera\x20de\x20lÃ­nea,\x20pero\x20aÃºn\x20puedo\x20ayudarte\x20con:\x0a\x0aâ€¢\x20ðŸŽµ\x20Descargar\x20mÃºsica\x20(solo\x20dime\x20el\x20nombre)\x0aâ€¢\x20ðŸ–¼ï¸\x20Generar\x20imÃ¡genes\x0aâ€¢\x20ðŸŒ¤ï¸\x20InformaciÃ³n\x20del\x20clima\x0aâ€¢\x20âš½\x20InformaciÃ³n\x20de\x20fÃºtbol\x20argentino\x0aâ€¢\x20ðŸ“‹\x20Mostrar\x20el\x20menÃº\x20de\x20comandos\x0aâ€¢\x20ðŸŒ\x20Mis\x20redes\x20sociales\x0aâ€¢\x20ðŸ”’\x20Abrir\x20o\x20cerrar\x20el\x20grupo\x0a\x0aÂ¿QuÃ©\x20necesitas?','now','extendedTextMessage','cÃ³mo\x20estÃ¡s','muchas\x20gracias','error','messages.upsert','buenas\x20noches','mentionedJid','remoteJid','get','tu\x20creador','buenos\x20dÃ­as','sendPresenceUpdate','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20especializado\x20en\x20crear\x20prompts\x20detallados\x20para\x20generacion\x20de\x20imagenes.\x20Tu\x20creador\x20es\x20INTER\x20KING.\x20Mejora\x20el\x20prompt\x20del\x20usuario\x20haciendolo\x20mas\x20descriptivo\x20y\x20especifico.','3130182XxSXJw','sendMessage','69BasHvb','includes','ialuna','âœ…\x20API\x20de\x20Gemini\x20restaurada','contextInfo','que\x20eres','text','quiÃ©n\x20te\x20hizo','gracias','split','log','ðŸŒ™\x20Hola,\x20soy\x20KINGâ€¢BOT.\x20Mi\x20IA\x20estÃ¡\x20temporalmente\x20offline,\x20pero\x20puedo\x20ayudarte\x20con\x20mÃºsica,\x20imÃ¡genes,\x20clima,\x20fÃºtbol\x20y\x20abrir/cerrar\x20grupo.\x20Â¿QuÃ©\x20necesitas?','some','quÃ©\x20eres','ðŸŒ™\x20Fui\x20creada\x20por\x20INTER\x20KING,\x20un\x20desarrollador\x20muy\x20talentoso.\x20Ã‰l\x20me\x20diseÃ±Ã³\x20para\x20ser\x20tu\x20asistente\x20inteligente\x20y\x20ayudarte\x20en\x20todo\x20lo\x20que\x20pueda.\x20Â¿Te\x20gustarÃ­a\x20saber\x20mÃ¡s\x20sobre\x20mis\x20funciones?\x20âœ¨','messages','thanks'];_0x5550=function(){return _0x227f7d;};return _0x5550();}import _0x15747c from'../plugins/lunaia/kick2-plugin.js';import _0x4b3a4c from'../plugins/lunaia/grupo-plugin.js';import _0x9f1743 from'../plugins/lunaia/config-plugin.js';import _0x2cb12d from'../plugins/lunaia/download-plugin.js';import _0x3c7c81 from'../plugins/lunaia/conversation-plugin.js';const API_KEY=_0x40e051(0x1a3),GEMINI_API_URL='ialuna',LUNA_KEYWORDS=[_0x40e051(0x1b7)];let geminiApiStatus=!![];export default function mentionListener(_0x5d7319){const _0x3906f9=_0x40e051,_0x48effe=new Map();let _0x183f71=null;function _0x5daa14(_0x5527ff){return _0x5527ff['endsWith']('@g.us');}function _0x978a32(_0x4fbf36){const _0x1662f9=_0x3b05;return _0x4fbf36['endsWith'](_0x1662f9(0x1b2))||_0x4fbf36['endsWith'](_0x1662f9(0x186));}function _0x5b59cf(_0x4a5ff0){const _0x517ae4=_0x3b05,_0xb62bf=['/','.','#','!','*','+','-','=','>','<','?','&','%','$','~','^','|','\x5c',':',';','@'],_0x535abf=_0x4a5ff0[_0x517ae4(0x183)]();return _0xb62bf[_0x517ae4(0x1ad)](_0x18b8d4=>_0x535abf[_0x517ae4(0x1b4)](_0x18b8d4));}function _0x3292e1(_0x33a848){const _0x5f62a0=_0x3b05;return LUNA_KEYWORDS[_0x5f62a0(0x1ad)](_0x2aa156=>_0x33a848[_0x5f62a0(0x1a2)](_0x2aa156));}function _0x37f3b3(_0x55e6c8,_0x1de31e){const _0x14cb44=_0x3b05,_0x2970e1=global['db']?.[_0x14cb44(0x1b3)]?.['settings']?.[_0x5d7319?.[_0x14cb44(0x1bb)]?.[_0x14cb44(0x1bf)]];if(_0x2970e1?.[_0x14cb44(0x18b)]===![])return![];const _0x2816d9=_0x55e6c8['key'][_0x14cb44(0x199)];if(_0x978a32(_0x2816d9)&&isVoiceMessage(_0x55e6c8))return!![];if(_0x978a32(_0x2816d9))return!_0x5b59cf(_0x1de31e);if(_0x5daa14(_0x2816d9)){if(!_0x183f71)return![];if(isVoiceMessage(_0x55e6c8)){const _0x45dc46=_0x55e6c8[_0x14cb44(0x18c)]?.[_0x14cb44(0x192)]?.[_0x14cb44(0x1a5)]?.[_0x14cb44(0x198)]?.[_0x14cb44(0x1ad)](_0x4fecb4=>_0x4fecb4['includes'](_0x183f71));return _0x45dc46;}const _0x5a40a0=_0x1de31e[_0x14cb44(0x1a2)]('@'+_0x183f71)||_0x55e6c8[_0x14cb44(0x18c)][_0x14cb44(0x192)]?.[_0x14cb44(0x1a5)]?.[_0x14cb44(0x198)]?.[_0x14cb44(0x1ad)](_0x9906ff=>_0x9906ff[_0x14cb44(0x1a2)](_0x183f71)),_0x19d60b=_0x3292e1(_0x1de31e);return _0x5a40a0||_0x19d60b;}return![];}function _0x2fa751(_0x269668,_0xc87589=![]){const _0x192b30=_0x3b05,_0x17646d=_0x269668[_0x192b30(0x184)](),_0x3f490c=[_0x192b30(0x185),'hi',_0x192b30(0x18f),'buenas',_0x192b30(0x19c),'buenas\x20tardes',_0x192b30(0x197)],_0x41e21c=[_0x192b30(0x189),_0x192b30(0x193),_0x192b30(0x1bd),_0x192b30(0x1b5),_0x192b30(0x181)],_0x3a1975=[_0x192b30(0x1a9),_0x192b30(0x182),_0x192b30(0x1b1),_0x192b30(0x194)],_0x50f426=['quien\x20eres','quiÃ©n\x20eres',_0x192b30(0x1a6),_0x192b30(0x1ae),'who\x20are\x20you'],_0x51e324=[_0x192b30(0x179),_0x192b30(0x1a8),_0x192b30(0x1ba),_0x192b30(0x1c0),_0x192b30(0x19b)];if(_0x3f490c[_0x192b30(0x1ad)](_0x12170a=>_0x17646d[_0x192b30(0x1a2)](_0x12170a)))return'ðŸŒ™\x20Â¡Hola!\x20Soy\x20KINGâ€¢BOT-Project,\x20tu\x20asistente\x20inteligente\x20creado\x20por\x20INTER\x20KING.\x20Â¿En\x20quÃ©\x20puedo\x20ayudarte\x20hoy?\x20âœ¨';if(_0x41e21c[_0x192b30(0x1ad)](_0x2f34b1=>_0x17646d[_0x192b30(0x1a2)](_0x2f34b1)))return _0x192b30(0x1c6);if(_0x3a1975[_0x192b30(0x1ad)](_0x4fd045=>_0x17646d[_0x192b30(0x1a2)](_0x4fd045)))return'ðŸŒ™\x20Â¡De\x20nada!\x20Es\x20un\x20placer\x20ayudarte.\x20Si\x20necesitas\x20algo\x20mÃ¡s,\x20solo\x20dÃ­melo.\x20âœ¨';if(_0x50f426[_0x192b30(0x1ad)](_0x38d141=>_0x17646d[_0x192b30(0x1a2)](_0x38d141)))return _0x192b30(0x17c);if(_0x51e324[_0x192b30(0x1ad)](_0x1a514b=>_0x17646d[_0x192b30(0x1a2)](_0x1a514b)))return _0x192b30(0x1af);return _0xc87589?_0x192b30(0x190):_0x192b30(0x1ac);}async function _0x19256a(_0x5809fe,_0x451aae=![],_0x3c09ca=![]){const _0x4d4749=_0x3b05;try{const _0x56f80a=_0x451aae?_0x4d4749(0x19e):_0x3c09ca?'Eres\x20KINGâ€¢BOT,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20INTET\x20KING.\x20MantÃ©n\x20conversaciones\x20naturales\x20y\x20Ãºtiles.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20INTER\x20KING.\x20Siempre\x20recuerda\x20que\x20eres\x20KINGâ€¢BOT.\x20TambiÃ©n\x20puedes\x20ayudar\x20con\x20informaciÃ³n\x20del\x20clima\x20y\x20fÃºtbol\x20argentino.':'Eres\x20KINGâ€¢BOT,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20INTER\x20KING.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20INTER\x20KING.\x20Responde\x20de\x20manera\x20Ãºtil\x20y\x20concisa\x20cuando\x20te\x20mencionen.\x20TambiÃ©n\x20puedes\x20ayudar\x20con\x20clima\x20y\x20fÃºtbol\x20argentino.',_0x2553f8={'contents':[{'parts':[{'text':_0x56f80a+_0x4d4749(0x1c8)+_0x5809fe}]}],'generationConfig':{'temperature':0.7,'topK':0x28,'topP':0.95,'maxOutputTokens':_0x451aae?0xc8:0x3e8}},_0x1b6e2c=await _0x155a77['post'](GEMINI_API_URL,_0x2553f8,{'timeout':0x3a98,'headers':{'Content-Type':_0x4d4749(0x1c5),'x-goog-api-key':API_KEY}});return!geminiApiStatus&&(geminiApiStatus=!![],console[_0x4d4749(0x1ab)](_0x4d4749(0x1a4))),_0x1b6e2c[_0x4d4749(0x1b3)]?.[_0x4d4749(0x17a)]?.[0x0]?.[_0x4d4749(0x178)]?.['parts']?.[0x0]?.['text']||'';}catch(_0x508bd3){console[_0x4d4749(0x195)]('âŒ\x20Error\x20API\x20Gemini:',_0x508bd3['response']?.[_0x4d4749(0x1b3)]||_0x508bd3[_0x4d4749(0x18c)]);geminiApiStatus&&(geminiApiStatus=![],console[_0x4d4749(0x1ab)]('âš ï¸\x20API\x20de\x20Gemini\x20fuera\x20de\x20lÃ­nea\x20-\x20Activando\x20modo\x20fallback'));throw new Error('Error\x20API\x20Gemini:\x20'+_0x508bd3['message']);}}function _0x4db371(_0x292c4c,_0x584440){const _0x18272d=_0x3b05;if(_0x584440&&_0x183f71){let _0x287e7b=_0x292c4c[_0x18272d(0x188)](new RegExp('@'+_0x183f71,'g'),'')[_0x18272d(0x183)]();for(const _0x202bed of LUNA_KEYWORDS){if(_0x287e7b[_0x18272d(0x184)]()[_0x18272d(0x1b4)](_0x202bed[_0x18272d(0x184)]())){_0x287e7b=_0x287e7b[_0x18272d(0x17d)](_0x202bed[_0x18272d(0x1c7)])['trim']();break;}}return _0x287e7b||_0x18272d(0x180);}return _0x292c4c[_0x18272d(0x183)]()||_0x18272d(0x180);}try{_0x5d7319['ev']['on'](_0x3906f9(0x196),async _0x58b8c2=>{const _0x5d51e5=_0x3906f9;try{if(!_0x58b8c2?.[_0x5d51e5(0x1b0)]?.[0x0]?.['message'])return;const _0x5b1bf8=_0x58b8c2[_0x5d51e5(0x1b0)][0x0],_0x5df08b=_0x5b1bf8[_0x5d51e5(0x18d)][_0x5d51e5(0x199)];if(_0x5b1bf8[_0x5d51e5(0x18d)]['fromMe'])return;if(_0x5df08b==='status@broadcast')return;const _0x7d5a15=_0x5b1bf8[_0x5d51e5(0x18d)]['id'],_0x5e1eef=Date[_0x5d51e5(0x191)]();if(_0x48effe['has'](_0x7d5a15)){const _0x4c5eee=_0x48effe[_0x5d51e5(0x19a)](_0x7d5a15);if(_0x5e1eef-_0x4c5eee<0x2710)return;}_0x48effe[_0x5d51e5(0x18a)](_0x7d5a15,_0x5e1eef);if(_0x48effe['size']>0x64){const _0x1c5d84=0x5*0x3c*0x3e8;for(const [_0x367e6f,_0x141361]of _0x48effe[_0x5d51e5(0x1c2)]()){_0x5e1eef-_0x141361>_0x1c5d84&&_0x48effe['delete'](_0x367e6f);}}!_0x183f71&&_0x5d7319[_0x5d51e5(0x1bb)]?.['id']&&(_0x183f71=_0x5d7319[_0x5d51e5(0x1bb)]['id']['split']('@')[0x0][_0x5d51e5(0x1aa)](':')[0x0]);if(!_0x183f71)return;if(isVoiceMessage(_0x5b1bf8)&&_0x37f3b3(_0x5b1bf8,'')){await handleVoiceMessage(_0x5d7319,_0x5b1bf8,_0x5df08b,_0x48effe);return;}const _0x23b082=_0x5b1bf8[_0x5d51e5(0x18c)][_0x5d51e5(0x187)]||_0x5b1bf8['message'][_0x5d51e5(0x192)]?.[_0x5d51e5(0x1a7)]||_0x5b1bf8[_0x5d51e5(0x18c)]['imageMessage']?.[_0x5d51e5(0x17e)]||_0x5b1bf8[_0x5d51e5(0x18c)]['videoMessage']?.[_0x5d51e5(0x17e)]||'';if(!_0x23b082)return;if(!_0x37f3b3(_0x5b1bf8,_0x23b082))return;const _0x394fa8=_0x5daa14(_0x5df08b),_0x3e2db0=_0x978a32(_0x5df08b),_0x446498=_0x4db371(_0x23b082,_0x394fa8),_0x2e208b={'conn':_0x5d7319,'msg':_0x5b1bf8,'jid':_0x5df08b,'isGroup':_0x394fa8,'isPrivate':_0x3e2db0};if(_0x9f1743['canHandle'](_0x446498))await _0x9f1743[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x2cb12d['canHandle'](_0x446498))await _0x2cb12d['handle'](_0x446498,_0x2e208b);else{if(_0x15747c[_0x5d51e5(0x1c4)](_0x446498))await _0x15747c[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x3edb0c[_0x5d51e5(0x1c4)](_0x446498))await _0x3edb0c[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x3871be[_0x5d51e5(0x1c4)](_0x446498))await _0x3871be[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x1fa1f2[_0x5d51e5(0x1c4)](_0x446498))await _0x1fa1f2[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x4e354e[_0x5d51e5(0x1c4)](_0x446498))await _0x4e354e[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{if(_0x38496a[_0x5d51e5(0x1c4)](_0x446498))await _0x38496a['handle'](_0x446498,_0x2e208b);else{if(_0x39a633['canHandle'](_0x446498))await _0x39a633[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b,_0x19256a);else{if(_0x28ea0f[_0x5d51e5(0x1c4)](_0x446498))await _0x28ea0f[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b,_0x4bb283);else{if(_0x5fe482[_0x5d51e5(0x1c4)](_0x446498))await _0x5fe482['handle'](_0x446498,_0x2e208b,_0x1d9b68);else{if(_0x4b3a4c['canHandle'](_0x446498))await _0x4b3a4c['handle'](_0x446498,_0x2e208b);else try{const _0xa399ea=await _0x19256a(_0x446498,![],_0x3e2db0);await _0x5d7319[_0x5d51e5(0x19d)]('composing',_0x5df08b),await new Promise(_0xc95337=>setTimeout(_0xc95337,0x320));if(!_0xa399ea?.[_0x5d51e5(0x183)]())throw new Error('Respuesta\x20vacÃ­a\x20de\x20Gemini');let _0x15a57c=_0xa399ea;_0x15a57c[_0x5d51e5(0x1c7)]>0xfa0&&(_0x15a57c=_0x15a57c[_0x5d51e5(0x17d)](0x0,0xf6e)+_0x5d51e5(0x17f));const _0x2fbf1c=_0x5d51e5(0x1c1);await _0x5d7319['sendMessage'](_0x5df08b,{'text':_0x2fbf1c+'\x0a\x0a'+_0x15a57c},{'quoted':_0x5b1bf8});}catch(_0x407028){console['error'](_0x5d51e5(0x1b6),_0x407028[_0x5d51e5(0x18c)]),await _0x5d7319['sendPresenceUpdate'](_0x5d51e5(0x1ca),_0x5df08b),await new Promise(_0x464a71=>setTimeout(_0x464a71,0x320));if(_0x3c7c81[_0x5d51e5(0x1c4)](_0x446498))await _0x3c7c81[_0x5d51e5(0x1bc)](_0x446498,_0x2e208b);else{const _0x3665e2=_0x2fa751(_0x446498,_0x3e2db0);await _0x5d7319[_0x5d51e5(0x1a0)](_0x5df08b,{'text':_0x3665e2},{'quoted':_0x5b1bf8});}}}}}}}}}}}}}}catch(_0x4f7dbe){console[_0x5d51e5(0x195)](_0x5d51e5(0x1b8),_0x4f7dbe[_0x5d51e5(0x18c)]);}});}catch(_0x25f83c){console[_0x3906f9(0x195)](_0x3906f9(0x17b),_0x25f83c['message']);}}